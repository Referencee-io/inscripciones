<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Formulario Paginado</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Delius&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.1/font/bootstrap-icons.min.css"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
    <link href="./styles.css" rel="stylesheet" />
  </head>
  <body>
    <div id="form-container">
      <div class="progress-bar">
        <div class="step active">1</div>
        <div class="line"></div>
        <div class="step">2</div>
        <div class="line"></div>
        <div class="step">3</div>
        <div class="line"></div>
        <div class="step">4</div>
        <div class="line"></div>
        <div class="step">5</div>
      </div>
      <!-- Paso 1: Datos del Alumno -->
      <div class="form-page active">
        <h2>Datos del Alumno</h2>
        <div class="row g-3 align-items-center">
          <div class="col-md-4">
            <label for="student_firstname">Nombre(s)</label>
            <input
              type="text"
              name="student_firstname"
              id="student_firstname"
              required
            />
          </div>
          <div class="col-md-4">
            <label for="student_lastname_father">Apellido Paterno</label>
            <input
              type="text"
              name="student_lastname_father"
              id="student_lastname_father"
              required
            />
          </div>
          <div class="col-md-4">
            <label for="student_lastname_mother">Apellido Materno</label>
            <input
              type="text"
              name="student_lastname_mother"
              id="student_lastname_mother"
            />
          </div>
        </div>

        <div class="row g-3 align-items-center">
          <div class="col-md-6">
            <div>
              <label for="student_gender">Género</label>
              <select name="student_gender" id="student_gender" required>
                <option value="">Seleccione</option>
                <option value="masculino">Masculino</option>
                <option value="femenino">Femenino</option>
                <option value="otro">Otro</option>
              </select>

              <!-- Input adicional que se mostrará cuando seleccionen "otro" -->
              <div id="otherGenderContainer" style="display: none">
                <label for="other_gender">Especifique género</label>
                <input
                  type="text"
                  id="other_gender"
                  name="other_gender"
                  required
                  placeholder="Especifique su género"
                />
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <label for="student_blood_type">Tipo de Sangre</label>
            <select name="student_blood_type" id="student_blood_type" required>
              <option value="">Seleccione</option>
              <option value="A+">A+</option>
              <option value="A-">A-</option>
              <option value="B+">B+</option>
              <option value="B-">B-</option>
              <option value="AB+">AB+</option>
              <option value="AB-">AB-</option>
              <option value="O+">O+</option>
              <option value="O-">O-</option>
            </select>
          </div>
        </div>

        <div class="row g-3 align-items-center">
          <div class="col-12">
            <label for="birth_day">Fecha de Nacimiento</label>
          </div>
          <div class="col-md-4 mt-0" style="margin-bottom: 0px">
            <select
              name="birth_day"
              id="birth_day"
              class="form-select"
              required
            >
              <option value="">Día</option>
            </select>
          </div>
          <div class="col-md-4 mt-0">
            <select
              name="birth_month"
              id="birth_month"
              class="form-select"
              required
            >
              <option value="">Mes</option>
              <option value="01">Enero</option>
              <option value="02">Febrero</option>
              <option value="03">Marzo</option>
              <option value="04">Abril</option>
              <option value="05">Mayo</option>
              <option value="06">Junio</option>
              <option value="07">Julio</option>
              <option value="08">Agosto</option>
              <option value="09">Septiembre</option>
              <option value="10">Octubre</option>
              <option value="11">Noviembre</option>
              <option value="12">Diciembre</option>
            </select>
          </div>
          <div class="col-md-4 mt-0">
            <select
              name="birth_year"
              id="birth_year"
              class="form-select"
              required
            >
              <option value="">Año</option>
            </select>
          </div>
        </div>

        <div class="row g-3 align-items-center">
          <div class="col-md-5">
            <label for="student_illness">Padece alguna enfermedad:</label>
            <select name="student_illness" id="student_illness" required>
              <option value="">Seleccione</option>
              <option value="sí">Sí</option>
              <option value="no">No</option>
            </select>
          </div>
          <div class="col-md-7">
            <label for="student_illness_details"
              >Especifique la enfermedad o alergia</label
            >
            <input
              type="text"
              name="student_illness_details"
              id="student_illness_details"
            />
          </div>
        </div>

        <label for="student_religion">Religión</label>
        <input type="text" name="student_religion" id="student_religion" />

        <label for="student_observations">Observaciones</label>
        <textarea
          name="student_observations"
          id="student_observations"
        ></textarea>
        <button class="next">Siguiente</button>
      </div>

      <!-- Paso 2: Datos Académicos -->
      <div class="form-page">
        <h2>Datos Académicos</h2>
        <div class="row g-3 align-items-center">
          <div class="col-md-4">
            <label for="academic_level">Nivel Escolar</label>
            <select name="academic_level" id="academic_level" required>
              <option value="seleccione">Seleccione</option>
              <option value="preescolar">Preescolar</option>
              <option value="primaria">Primaria</option>
              <option value="secundaria">Secundaria</option>
              <option value="preparatoria">Preparatoria</option>
            </select>
          </div>

          <div class="col-md-4">
            <label for="academic_grade">Grado</label>
            <select name="academic_grade" id="academic_grade" required>
              <option value="seleccione">Seleccione</option>
            </select>
          </div>

          <div class="col-md-4">
            <label for="ciclo">Ciclo Escolar</label>
            <input type="text" id="ciclo" value="2025-2026" disabled />
          </div>
        </div>

        <label for="academic_previous_school">Escuela de Procedencia</label>
        <input
          type="text"
          name="academic_previous_school"
          id="academic_previous_school"
          required
        />

        <label for="academic_report_card">ANEXOS REQUERIDOS</label>
        <p>Boleta de Calificaciones/Certificado de Estudios</p>
        <input
          type="file"
          name="academic_report_card"
          id="academic_report_card"
          required
        />
        <p>CURP</p>
        <input
          type="text"
          name="academic_curp"
          id="academic_curp"
          class="uppercase-input"
          required
        />
        <input
          type="file"
          name="academic_curp_file"
          id="academic_curp_file"
          required
        />
        <p>Acta de Nacimiento</p>
        <input
          type="file"
          name="academic_birth_certificate"
          id="academic_birth_certificate"
          required
        />

        <!-- Contenedor de botones -->
        <div class="button-container">
          <button class="prev">Atrás</button>
          <button class="next">Siguiente</button>
        </div>
      </div>

      <!-- Paso 3: Datos del Padre/Madre -->
      <div class="form-page">
        <h2>Datos del Padre/Madre</h2>
        <div class="row g-3 align-items-center">
          <div class="col-md-4">
            <label for="parent_firstname">Nombre(s)</label>
            <input
              type="text"
              name="parent_firstname"
              id="parent_firstname"
              required
            />
          </div>
          <div class="col-md-4">
            <label for="parent_lastname_father">Apellido Paterno</label>
            <input
              type="text"
              name="parent_lastname_father"
              id="parent_lastname_father"
              required
            />
          </div>
          <div class="col-md-4">
            <label for="parent_lastname_mother">Apellido Materno</label>
            <input
              type="text"
              name="parent_lastname_mother"
              id="parent_lastname_mother"
            />
          </div>
        </div>

        <div class="row g-3 align-items-center">
          <div class="col-md-4">
            <label for="parent_relationship">Parentesco</label>
            <select
              name="parent_relationship"
              id="parent_relationship"
              required
            >
              <option value="seleccione">Seleccione</option>
              <option value="padre">Padre</option>
              <option value="madre">Madre</option>
              <option value="tutor">Tutor</option>
            </select>
          </div>
          <div class="col-md-8">
            <label for="parent_email">Correo Electrónico</label>
            <input
              type="email"
              name="parent_email"
              id="parent_email"
              required
            />
          </div>
        </div>

        <label for="parent_ine_file">INE</label>
        <input
          type="file"
          name="parent_ine_file"
          id="parent_ine_file"
          required
        />

        <div class="row g-3 align-items-center">
          <div class="col-md-6">
            <label for="parent_phone_home">Tel. de Casa/Oficina</label>
            <input type="tel" name="parent_phone_home" id="parent_phone_home" />
          </div>
          <div class="col-md-6">
            <label for="parent_phone_mobile">Celular</label>
            <input
              type="tel"
              name="parent_phone_mobile"
              id="parent_phone_mobile"
              required
            />
          </div>
        </div>

        <div class="row g-3 align-items-center">
          <div class="col-md-6">
            <label for="parent_occupation">Ocupación</label>
            <input
              type="text"
              name="parent_occupation"
              id="parent_occupation"
              required
            />
          </div>

          <div class="col-md-6">
            <label for="parent_marital_status">Estado Civil</label>
            <select
              name="parent_marital_status"
              id="parent_marital_status"
              required
            >
              <option value="">Seleccione</option>
              <option value="soltero">Soltero</option>
              <option value="casado">Casado</option>
              <option value="divorciado">Divorciado</option>
            </select>
          </div>
        </div>

        <h3>Dirección</h3>
        <label for="address_street">Calle</label>
        <input type="text" name="address_street" id="address_street" required />

        <div class="row g-3 align-items-center">
          <div class="col-md-4">
            <label for="address_number">Número</label>
            <input
              type="text"
              name="address_number"
              id="address_number"
              required
            />
          </div>
          <div class="col-md-4">
            <label for="address_colony">Colonia</label>
            <input
              type="text"
              name="address_colony"
              id="address_colony"
              required
            />
          </div>

          <div class="col-md-4">
            <label for="address_zipcode">Código Postal</label>
            <input
              type="text"
              name="address_zipcode"
              id="address_zipcode"
              required
            />
          </div>
        </div>

        <div class="row g-3 align-items-center">
          <div class="col-md-6">
            <label for="address_state">Estado</label>
            <select name="address_state" id="address_state" required>
              <option value="seleccione">Seleccione</option>
            </select>
          </div>
          <div class="col-md-6">
            <label for="address_city">Ciudad</label>
            <select name="address_city" id="address_city" required>
              <option value="seleccione">Seleccione</option>
              <!-- Agrega más ciudades según sea necesario -->
            </select>
          </div>
        </div>

        <!-- Contenedor de botones -->
        <div class="button-container">
          <button class="prev">Atrás</button>
          <button class="next">Siguiente</button>
        </div>
      </div>

      <!-- Paso 4: Contacto de Emergencia -->
      <div class="form-page">
        <h2>Contacto de Emergencia</h2>
        <div class="row g-3 align-items-center">
          <div class="col-md-4">
            <label for="emergency_firstname">Nombre(s)</label>
            <input
              type="text"
              name="emergency_firstname"
              id="emergency_firstname"
              required
            />
          </div>

          <div class="col-md-4">
            <label for="emergency_lastname_father">Apellido Paterno</label>
            <input
              type="text"
              name="emergency_lastname_father"
              id="emergency_lastname_father"
              required
            />
          </div>

          <div class="col-md-4">
            <label for="emergency_lastname_mother">Apellido Materno</label>
            <input
              type="text"
              name="emergency_lastname_mother"
              id="emergency_lastname_mother"
            />
          </div>
        </div>

        <div class="row g-3 align-items-center">
          <div class="col-md-6">
            <label for="emergency_phone">Teléfono de Emergencia</label>
            <input
              type="tel"
              name="emergency_phone"
              id="emergency_phone"
              required
            />
          </div>

          <div class="col-md-6">
            <label for="emergency_relationship">Parentesco</label>
            <select
              name="emergency_relationship"
              id="emergency_relationship"
              required
            >
              <option value="">Seleccione</option>
              <option value="padre">Padre</option>
              <option value="madre">Madre</option>
              <option value="hermano">Hermano</option>
              <option value="tío">Tío</option>
              <option value="tutor">Tutor</option>
              <option value="amigo">Amigo</option>
            </select>
          </div>
        </div>

        <!-- Contenedor de botones -->
        <div class="button-container">
          <button class="prev">Atrás</button>
          <button class="next">Siguiente</button>
        </div>
      </div>

      <!-- Paso 5: Información de Pago -->
      <div class="form-page">
        <h2>Información de Pago</h2>
        <p><strong>Concepto:</strong> Inscripción al ciclo escolar 2025-2026</p>
        <p><strong>Monto:</strong> $2,000.00 MXN</p>

        <div id="stripe-container">
          <div id="card-element"></div>
        </div>
        <!-- Contenedor de botones -->
        <div class="button-container">
          <button class="prev">Atrás</button>
          <button id="pay-button">Pagar</button>
        </div>
      </div>
    </div>
    <!-- Modal de Procesando -->
    <div class="modal fade" tabindex="-1" id="payProcess">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-body text-center py-4">
            <div
              class="spinner-border text-primary mb-3"
              role="status"
              style="width: 3rem; height: 3rem"
            >
              <span class="visually-hidden">Loading...</span>
            </div>
            <h5 class="mb-0">Procesando pago...</h5>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal de Éxito -->
    <div class="modal fade" tabindex="-1" id="successModal">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <!-- Encabezado del modal -->
          <div class="modal-header">
            <h5 class="modal-title">Confirmación de Pago</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>

          <!-- Cuerpo del modal -->
          <div class="modal-body text-center py-4">
            <!-- Ícono de éxito -->
            <div class="mb-3" id="iconContainer">
              <i class="bi bi-bag-check success-icon"></i>
            </div>
            <!-- Mensaje de confirmación -->
            <h5 class="mb-3 mt-3">
              El pago se efectuó exitosamente y el registro se ha guardado.
            </h5>
            <hr />

            <!-- Contenido del recibo -->
            <div id="receiptContent" style="text-align: left">
              <!-- El recibo se generará aquí dinámicamente -->
              <p style="font-size: 14px; color: #666">
                <em>Generando el recibo...</em>
              </p>
            </div>
            <hr />

            <!-- Botones -->
            <div class="d-flex justify-content-center gap-3">
              <button class="btn btn-primary" id="downloadReceipt">
                Descargar recibo PDF
              </button>
              <button type="button" id="reloadPage" class="btn btn-success">
                Aceptar
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- MOMENT JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.27.0/moment.min.js"></script>
    <!-- FIREBASE SCRIPTS -->
    <script src="./config.json"></script>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.2//firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.2//firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-storage.js"></script>
    <script>
      // Cargar el archivo config.json
      fetch("./config.json")
        .then((response) => {
          if (!response.ok) {
            throw new Error("No se pudo cargar el archivo config.json");
          }
          return response.json();
        })
        .then((config) => {
          // Usar las variables del archivo config.json en Firebase
          const firebaseConfig = window.FIREBASE_CONFI;

          // Inicializar Firebase con la configuración
          if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
          }

          // Definir variables globales para Firebase
          window.auth = firebase.auth();
          window.db = firebase.firestore();
          window.storage = firebase.storage();
          window.storageRef = window.storage.ref();

          console.log("Firebase configurado correctamente.");
        })
        .catch((error) => {
          console.error("Error al cargar config.json:", error);
        });
    </script>

    <script src="https://js.stripe.com/v3/"></script>

    <script src="./script.js"></script>
  </body>
</html>
